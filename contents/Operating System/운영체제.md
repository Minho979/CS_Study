# 운영체제
## 개념
### 정의
<img src='https://github.com/Minho979/CS_Study/blob/main/contents/images/OS.png' width='500'>

- 응용 프로그램이 컴퓨터 하드웨어와 상호 작용할 수 있도록 해주는 소프트웨어
- 사용자와 하드웨어 사이의 중간 매개체로 응용 프로그램의 실행을 제어하고 자원을 할당 및 관리하며 입출력 제어 및 데이터 관리와 같은 서비스를 제공하는 소프트웨어
- 컴퓨터의 자원을 독점하고 관리하는 소프트웨어 

### 역할
<img src='https://github.com/Minho979/CS_Study/blob/main/contents/images/OS-role.png' width='550'>

- 시스템을 편리하게 사용할 수 있도록 하드웨어, 사용자, 응용 프로그램, 시스템 프로그램 사이의 인터페이스를 제공
- 컴퓨터 자원을 효율적으로 활용하도록 조정하고 관리
- 프로그램의 실행을 제어
- 다양한 사용자에게서 컴퓨터 시스템을 보호하고 입출력을 제어하며 데이터를 관리

### 운영체제의 발전 목적 
<img src='https://github.com/Minho979/CS_Study/blob/main/contents/images/OS-purpose.png' width='600'>

### 주요 구성 요소
#### 커널
- 운영체제의 핵심 구성요소로 메인 메모리에 상주하며 핵심 기능을 수행하고, 응용 프로그램을 수행하는데 필요한 환경을 설정한다.
  - 프로세스 스케줄링
  - 메모리 관리
  - 파일 생성, 삭제, 파일 입출력 등 파일 및 파일 시스템 관리
  - 장치 드라이버를 호출하여 장치 입출력 관리 
- 커널 코드는 구체적으로 함수의 형태로 존재하고 응용프로그램이 함수 호출을 통해 응용프로그램 내 함수를 호출하는 것처럼 응용프로그램에서 커널에 있는 함수를 활용하기 위해 시스템 콜을 사용한다.

#### 장치 드라이버
- 장치를 직접 제어하는 소프트웨어
- 마우스 드라이버, 키보드 드라이버, 프린트 드라이버 등을 제공한다.

#### 사용자 인터페이스
- 사용자가 편리하게 사용할 수 있도록 GUI 인터페이스를 제공한다. 

#### 시스템 유틸리티 
- 프로그램의 개발과 실행을 위해 편리한 환경을 구축하도록 도와주는 유틸리티를 제공한다.
- 파일 관리, 파일 변경, 상태 정보, 프로그래밍 언어 지원, 프로그램 적재와 실행, 통신 서비스를 제공한다. 

### 유형
- 컴퓨터 시스템의 발전 과정과 용도에 따라 다음과 같이 운영체제 유형을 구분할 수 있다.
- 일괄 처리 시스템 (batch processing system)
  - 한 작업이 끝날 때까지는 다른 작업을 시작할 수 없으므로, 프로세서와 메모리의 활용도가 떨어지는 시스템
- 다중 프로그래밍 시스템 (multi programming system)
  - 프로세서가 쉬지 않고 항상 수행할 프로그램을 갖도록 함으로써 프로세서 사용률(utilzation)을 높인 시스템
- 시분할 시스템 (time sharing system)
  - 프로세서 시간을 잘게 분할하여 할당함으로써 여러 프로그램들을 교대로 실행하는 시스템
- 다중 처리 시스템 (multi processing system)
  - 단일 컴퓨터 시스템 내에서 둘 이상의 프로세서를 사용하여 동시에 둘 이상의 프로그램을 실행하는 시스템
- 실시간 처리 시스템 (real time processing system)
  - 프로세서의 작동이나 데이터의 흐름에 엄격한 시간적 제약이 있는 경우 사용하는 시스템
- 분산 처리 시스템 (distributed processing)
  - 시스템마다 각각의 운영체제와 메모리를 가지고 독립적으로 운영되며 필요할 때 통신하는 시스템

## 기능 
### 자원 관리
#### 메모리 관리
- **메인 메모리 관리를 위한 기능**
  - 메인 메모리의 어느 부분을 사용하고, 누가 사용하는지 점검
  - 메인 메모리에 저장할 프로세스 결정
  - 메인 메모리를 할당하고 회수하는 방법 결정
- **보조기억장치 관리를 위한 기능**
  - 빈 여유 공간 관리
  - 새로운 파일 작성 시 저장 장소 할당
  - 기억장치 접근 요청 스케줄링
  - 파일 생성 및 삭제 

#### 프로세스 관리 
- 커널에 속한 기능으로 자주 사용된다.
- **프로세스 관리를 위한 기능**
  - 프로세스와 스레드 스케줄링
  - 사용자 프로세스와 시스템 프로세스 생성, 제거
  - 프로세스 중지, 재수행
  - 프로세스 동기화 방법 제공
  - 프로세스 통신 방법 제공
  - 교착 상태 방지 방법 제공

#### 주변장치(입출력장치) 관리
- 특수 프로그램인 장치 드라이버를 사용하여 입출력장치와 상호작용한다.
- **주변장치(입출력장치) 관리를 위한 기능**
  - 임시 저장(buffer-caching) 시스템 기능 제공
  - 일반 장치용 드라이버 인터페이스 제공
  - 특정 장치 드라이버 제공

#### 파일(데이터) 관리
- 컴퓨터 시스템은 물리적으로 다양한 매체에 정보를 저장할 수 있고 운영체제는 데이터를 효율적으로 사용할 수 있도록 파일이라는 단일한 저장 형태를 제공한다.
- **파일 관리를 위한 기능**
  - 파일 생성, 삭제
  - 디렉토리 생성, 삭제
  - 보조기억장치의 파일 맵핑
  - 비휘발성 저장장치에 파일 저장

### 시스템 관리
#### 시스템 보호(사용자 권한 부여)
- 여러 프로세스가 동시에 실행이 가능하므로 상호 보호가 필요하다.
- 데이터가 저장된 파일 사용 권한 부여, 데이터 암호화 등의 서비스를 제공

#### 네트워킹(통신)
- 네트워크를 통해 연결된 프로세서가 통신을 할 때는 경로 설정, 접속 정책, 충돌, 보안 등을 고려하여 관리한다.

#### 명령 해석기(command interpreter)
- 운영체제에서 중요한 시스템 프로그램으로 대화형으로 입력한 명령어를 이해하고 실행하는 사용자와 운영체제 간의 인터페이스이다.
- 사용자가 입력한 명령을 운영체제에 전달하는 역할을 수행한다.
- 커널 내부, 외부에 존재 가능하지만 커널과 외부에 분리시키는 것이 좋다.
  - 분리시킬 경우 멸령 해석기의 인터페이스 변경이 가능하다. 

## 서비스
운영체제는 운영체제 기능을 수행하기 위해 다양한 서비스를 제공한다.

### 부팅 서비스
컴퓨터 하드웨어를 관리하고 프로그램을 실행할 수 있도록 컴퓨터를 시동하는 서비스로 아래의 서비스를 제공한다.
- 부팅(Booting) 또는 부트스트래핑(bootstrapping) 서비스
  - 부팅(Booting): 운영체제를 메모리에 적재하는 과정으로 부트 로더를 통해 적재한다.
  - 부트 로더(bootstrap loader): ROM에 고정시킨 소규모 프로그램으로 보조기억장치에 저장된 운영체제를 메인 메모리에 적재하는 역할
- 부팅 과정 예)

  <img src='https://github.com/Minho979/CS_Study/blob/main/contents/images/OS-boot-process.png' width='500'>

### 사용자 서비스
사용자가 작업을 쉽게 수행할 수 있도록 하는 서비스로 아래의 서비스를 제공한다.
- 사용자 인터페이스
  - CLI(Command Line Interface): 명령 라인 인터페이스
  - 메뉴 인터페이스
  - GUI(Graphical User Interface): 그래픽 인터페이스
- 프로그램 실행
  - 메모리에 프로그램을 적재하고 프로세서 시간 할당
- 입출력 동작 수행
  - 입출력 동작을 직접 수행할 수 없는 사용자 프로그램의 입출력 방법 제공
- 파일 시스템 조작
- 통신(네트워크)
  - 프로그램 간 통신 제공
- 오류 탐지
  - 하드웨어 오류, 사용자 프로그램 오류 탐지

### 시스템 서비스
시스템 자체의 효율적인 동작을 보장하는 서비스를 제공한다.
- 자원 할당
  - 다수의 프로그램에 시스템 자원을 할당
- 계정
  - 각 사용자의 자원 정보를 저장하고 추적
- 보호와 보안
  - 프로세스를 다른 사용자 프로세스로부터 보호
  - 운영체제가 권한을 부여한 프로세스만 자원을 사용할 수 있도록 함
  - 잘못된 접근 시도 방어, 사용자 인증 요구 등 

### 시스템 호출
프로그램과 운영체제 간의 인터페이스를 제공한다.
- 시스템 호출(system call) 서비스
  - 실행중인 프로그램과 운영체제 간의 인터페이스로 API(Application Programming Interface)라고도 부른다.
  - 사용자 프로그램은 운영체제의 서비스를 필요로 할 때 시스템 호출 요청을 통해 운영체제의 서비스를 받는다.
  - 시스템 호출은 '프로그램에서 명령 또는 서브루틴 호출 형태'로 호출하거나 '시스템에서 명령 해석기를 통해 대화 형태'로 이루어진다.
  - 시스템 호출이 제공하는 서비스
 
    <img src='https://github.com/Minho979/CS_Study/blob/main/contents/images/OS-system-call.png' width='600'>
    
  - 시스템 호출 처리 예)
 
    <img src='https://github.com/Minho979/CS_Study/blob/main/contents/images/OS-system-call-ex.png' width='600'>

    - 시스템 콜 테이블: 시스템 콜 번호와 시스템 콜 핸들러 함수 주소로 구성
   
## 특징
### 추상화(Abstraction)
- 컴퓨터 시스템 하드웨어를 사용자가 쉽게 다룰 수 있도록 추상화한다.
- 프로세서(CPU)를 프로세스, 메모리를 메모리 관리, 디스크를 파일 및 Inode와 같이 추상화된 개념으로 제공하는 것을 의미
### 가상화(Virtualization)
- 작업을 수행하는 기본 방법 중 하나로 사용되며 하드웨어 자원을 하나로 보이게 하여 여러 프로세스가 병렬적으로 실행되는 것처럼 보이게 한다. 
- 이를 통해 프로세서의 효율성을 최대화하고 더 많은 프로세스를 실행할 수 있게 한다.
  - 프로세서의 가상화
    - 문맥 교환을 통해 구현되며 실제로는 하나의 프로세서가 번갈아가면서 프로세스를 실행한다. 
  - 메모리의 가상화
    - 실행 중인 각 프로세스는 가상 주소를 사용하여 동일한 주소에 메모리를 할당 받아 마치 각각 독립적으로 메모리를 사용하는 것처럼 보이게 한다.
### 병행성(Concurrency)
- 여러 프로세스를 동시에 실행하지만 조절을 통해 공유 데이터에 접근 시 발생할 수 있는 문제를 해결한다.
- 이를 위해 세마포어, 락, 쓰레드와 같은 개념을 사용한다. 
### 영속성(Persistence)
- 디스크에 파일을 쓰기 위한 기능을 제공하고 전원이 꺼져도 데이터를 안전하게 저장한다. 

> ⬆️:[Top](#운영체제)
> ⬅️:[Back](https://github.com/Minho979/CS_Study/blob/main/README.md#%EF%B8%8F-Operating-System)
> 💁:[Home](https://github.com/Minho979/CS_Study/blob/main/README.md)
> - Reference
> - [구현회. 운영체제-그림으로 배우는 구조와 원리, 개정3판. 한빛아카데미]
