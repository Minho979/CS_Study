# í•´ì‹œ í…Œì´ë¸”
## ê°œë…
- [í•´ì‹œ(Hash)](<https://github.com/Minho979/CS_Study/blob/main/contents/Data%20Structure/Hash.md>)

## êµ¬í˜„ ì½”ë“œ
- í•´ì‹œ í…Œì´ë¸” êµ¬í˜„ì€ ì¶©ëŒ ì²˜ë¦¬ ë°©ì‹ì— ë”°ë¼ ë‚˜ë‰œë‹¤
  - Separate chaining
  - Open addressing 
- ìë°”ì—ì„œ ì§€ì›í•˜ëŠ” Hash Mapì€ Chainingì„ ì´ìš©í•˜ë©°, íŒŒì´ì¬ì˜ ê²½ìš° open addressingì„ í†µí•´ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤ 

### Separate chaining
``` java
import java.util.LinkedList;

public class HashTable {
	
	public static void main(String[] args) {
		ChainingHashTable cht = new ChainingHashTable(3);
		
		// ì‚½ì… 
		cht.put("Kim", "Min Ho");
		cht.put("github", "https://github.com/Minho979");
		cht.put("Study", "CS_Study");
		cht.put("Date", "2023.10.27");
		
		// ë®ì–´ì“°ê¸° 
		cht.put("Study", "Algorithm Study");
		
		System.out.println(cht.get("Kim"));
		System.out.println(cht.get("github"));
		System.out.println(cht.get("Study"));
		System.out.println(cht.get("Date"));
		
		// ì—†ëŠ” ì›ì†Œ 
		System.out.println(cht.get("test"));
		
		// ì ì¬ìœ¨ 
		System.out.println("load factor = " + cht.getLoadFactor());
		
		// ì ì¬ ìƒí™© 
		cht.printTable();
	}

}

// ì¶©ëŒì„ Chaining ë°©ì‹ìœ¼ë¡œ í•´ê²°í•˜ëŠ” HashTable
class ChainingHashTable {
	
	// ì €ì¥í•  ë°ì´í„°ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤ 
	class Node {
		String key;	// ê²€ìƒ‰ 
		String value;	// ê²°ê³¼ 
		
		// ìƒì„±ì 
		public Node(String key, String value) {
			this.key = key;
			this.value = value;
		}
		
		public String getKey() {
			return key;
		}
		
		public void setKey() {
			this.key = key;
		}
		
		public String getValue() {
			return value;
		}
		
		public void setValue() {
			this.value = value;
		}
	}
	
	private LinkedList<Node>[] table;
	private int size;		  // í…Œì´ë¸” í¬ê¸° 
	private int n;			  // ì›ì†Œ ìˆ˜ 
	
	// í•´ì‹œ í…Œì´ë¸” ë°°ì—´ í¬ê¸°ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ í•´ì‹œí…Œì´ë¸” ìƒì„± 
	public ChainingHashTable(int size) {
		table = new LinkedList[size];
		n = 0;
		this.size = size;
	}
	
	/*
	 í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ í•¨ìˆ˜
	 keyë¥¼ ë°›ì•„ í•´ì‹œ ê°’ìœ¼ë¡œ ë³€í™˜ 
	 */
	private int hash(String key) {
		int hash = 0;
		
		// í‚¤ ê°’ì˜ ì•„ìŠ¤í‚¤ ì½”ë“œë¥¼ ê°€ì ¸ì™€ ëª¨ë‘ ë”í•¨ O(1)
		for(char c: key.toCharArray()) {
			hash += c;
		}
		return hash;
	}
	 // í•´ì‹œë¥¼ LinkedList ì¸ë±ìŠ¤ë¡œ ë³€í™˜ O(1)
	private int convertToIndex(int hash) {
		return hash % size;
	}
	
	// ë°ì´í„° ì‚½ì… ë©”ì†Œë“œ [í‰ê·  O(1)]
	public void put(String key, String value) {
		int hash = hash(key);
		int idx = convertToIndex(hash);
		
		System.out.println(key +", hash("+ hash +"), index(" + idx + ")");
		
		/*
		 ì„ ì–¸í•œ list ë°°ì—´ì—ì„œ indexë¡œ LinkedListë¥¼ ì°¾ê³ 
		 nullì¸ ê²½ìš° ìƒˆë¡œìš´ LinkedList ìƒì„± í›„ 
		 í•´ë‹¹ indexì˜ ë°°ì—´ì— í• ë‹¹  
		 */
		LinkedList<Node> list = table[idx];
		if(list == null) {
			list = new LinkedList<Node>();
			table[idx] = list;
		}
		
		/*
		 Nodeë¥¼ ì°¾ì•„ null ì´ë¼ë©´ keyì— í•´ë‹¹í•˜ëŠ” valueê°€ ì—†ê¸°ì— 
		 LinkedList ë§ˆì§€ë§‰ ìœ„ì¹˜ì— Nodeë¥¼ ë§Œë“¤ì–´ ì €ì¥ 
		 valueê°€ ìˆë‹¤ë©´ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë®ì–´ì“´ë‹¤ 
		 */
		Node node = searchKey(list, key);
		if (node == null) {
			list.addLast(new Node(key, value));
			n++; // ì‚½ì… í›„ ì›ì†Œ ìˆ˜ ì¹´ìš´íŠ¸ 
		}
		else {
			node.value = value;
		}
				
	}
	
	// ì ì¬ìœ¨ ê³„ì‚° 
	public double getLoadFactor() {
		return (double) n / size;
	}
	
	// í‚¤ ê°’ì„ ì´ìš©í•´ í•´ë‹¹ ì¸ë±ìŠ¤ì˜ LinkedListë¥¼ ìˆœì°¨ íƒìƒ‰í•˜ì—¬ ê°’ ë¦¬í„´ [í‰ê·  O(1)]
	public String get(String key) {
		int hash = hash(key);
		int idx = convertToIndex(hash);
		LinkedList<Node> list = table[idx];
		for(Node n: list) {
			if (n.getKey().equals(key)) {
				return n.getValue();
			}
		}
		return null;

	}
	
	// ì…ë ¥ ë°›ì€ keyë¡œ LinkedListì—ì„œ Nodeë¥¼ ì°¾ëŠ” ë©”ì†Œë“œ 
	private Node searchKey(LinkedList<Node> list, String key) {
		if (list == null) return null;
		
		for (Node n : list) {
			if (n.key.equals(key)) {
				return n;
			}
		}
		return null;
	}
	
	// key ê°’ì˜ ì‚½ì… ìœ„ì¹˜ í™•ì¸ ë©”ì†Œë“œ 
	public void printTable() {
		for (int i = 0; i < table.length; i++) {
			System.out.print("table[" + i + "] = ");
			LinkedList<Node> temp = table[i];
			try {
				for (Node t : temp) {
					System.out.print(t.getKey() + " ");
				}
				System.out.println();				
			}catch (NullPointerException e){
				System.out.println();
			}
		}
	}
}

```

### Open addressing 
``` java
// í•´ì‹œ ë…¸ë“œ í´ë˜ìŠ¤ 
class HashNode {
    int key;
    int value;

    // ìƒì„±ì 
    public HashNode(int key, int value) {
        this.key = key;
        this.value = value;
    }
}
 
// í•´ì‹œ ë§µ í´ë˜ìŠ¤ ì¶©ëŒì„ Open addressing ë°©ë²•ìœ¼ë¡œ í•´ê²° 
class HashMap {
    // í•´ì‹œ ìš”ì†Œ ë°°ì—´ 
    int capacity;
    int size;
    HashNode[] arr;
    // ì„ì‹œ í•´ì‹œ ë…¸ë“œ 
    HashNode dummy;
 
    public HashMap() {
        this.capacity = 20;
        this.size = 0;
        this.arr = new HashNode[this.capacity];
        // ë”ë¯¸ ë…¸ë“œ ì´ˆê¸°í™” 
        this.dummy = new HashNode(-1, -1);
    }
 
    // keyì— ëŒ€í•œ indexë¥¼ ì°¾ê¸° ìœ„í•œ í•´ì‹œ í•¨ìˆ˜ 
    public int hashCode(int key) {
        return key % this.capacity;
    }
 
    // keyì™€ value ì‚½ì… 
    public void insertNode(int key, int value) {
        HashNode temp = new HashNode(key, value);
        // í•´ì‹œ ì¸ë±ìŠ¤ ì„¤ì •  
        int hashIndex = hashCode(key);
        // ë¹ˆ ê³µê°„ ì°¾ê¸° 
        while (this.arr[hashIndex] != null && this.arr[hashIndex].key != key && this.arr[hashIndex].key != -1) {
            hashIndex++;
            hashIndex %= this.capacity;
        }
        // ìƒˆ ë…¸ë“œë¥¼ ì‚½ì…í•  ë•Œ í¬ê¸° ì¦ê°€
        if (this.arr[hashIndex] == null || this.arr[hashIndex].key == -1) {
            this.size++;
        }
        this.arr[hashIndex] = temp;
    }
 
    // í‚¤ ê°’ ì‚­ì œ 
    public int deleteNode(int key) {
        // ì¸ë±ìŠ¤ ì„¤ì • 
        int hashIndex = hashCode(key);
        // í‚¤ì— í•´ë‹¹í•˜ëŠ” ë…¸ë“œ ì°¾ê¸° 
        while (this.arr[hashIndex] != null) {
            // í•´ë‹¹ ë…¸ë“œë¥¼ ì°¾ì€ ê²½ìš° 
            if (this.arr[hashIndex].key == key) {
                HashNode temp = this.arr[hashIndex];
                // ë‚˜ì¤‘ì— ì´ìš©í•˜ê¸° ìœ„í•´ ë”ë¯¸ ë…¸ë“œ ì‚½ì… 
                this.arr[hashIndex] = this.dummy;
                // ì‚­ì œ í›„ í¬ê¸° ê°ì†Œ 
                this.size--;
                return temp.value;
            }
            hashIndex++;
            hashIndex %= this.capacity;
        }
        // ê°’ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´ -1 ë°˜í™˜ 
        return -1;
    }
 
    // í‚¤ ê°’ì„ ë§¤ê°œë³€ìˆ˜ ì‚¼ì•„ node ê°’ ê²€ìƒ‰ 
    public int get(int key) {
        // ì¸ë±ìŠ¤ ì„¤ì • 
        int hashIndex = hashCode(key);
        int counter = 0;
        // í‚¤ì— í•´ë‹¹í•˜ëŠ” ë…¸ë“œ ì°¾ê¸° 
        while (this.arr[hashIndex] != null) {
            // ë¬´í•œ ë£¨í”„ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨
            if (counter > this.capacity) {
                return -1;
            }
            // ë…¸ë“œë¥¼ ì°¾ì€ ê²½ìš° 
            if (this.arr[hashIndex].key == key) {
                return this.arr[hashIndex].value;
            }
            hashIndex++;
            hashIndex %= this.capacity;
            counter++;
        }
        // ë…¸ë“œê°€ ì—†ëŠ” ê²½ìš°
        return 0;
    }
 
    // í˜„ì¬ í¬ê¸° ë°˜í™˜
    public int sizeofMap() {
        return this.size;
    }
 
    // ë¹„ì–´ì‡ëŠ” ê²½ìš° ture ë°˜í™˜
    public boolean isEmpty() {
        return this.size == 0;
    }
 
    // ì§€ì •ëœ key, value í•œ ìŒ í‘œê¸° ë©”ì†Œë“œ 
    public void display() {
        for (int i = 0; i < this.capacity; i++) {
            if (this.arr[i] != null && this.arr[i].key != -1) {
                System.out.println("key = " + this.arr[i].key + " value = " + this.arr[i].value);
            }
        }
    }
}
   
  public class Main {
    public static void main(String[] args) {
        HashMap h = new HashMap();
        h.insertNode(1, 1);
        h.insertNode(2, 2);
        h.insertNode(2, 3);
        h.display();
        System.out.println(h.sizeofMap());
        System.out.println(h.deleteNode(2));
   
```

> â¬†ï¸:[Top](#í•´ì‹œ-í…Œì´ë¸”)
> â¬…ï¸:[Back](https://github.com/Minho979/CS_Study/blob/main/README.md#%EF%B8%8F-Algorithm)
> ğŸ’:[Home](https://github.com/Minho979/CS_Study/blob/main/README.md)
> - Reference
> - [ë¬¸ë³‘ë¡œ. ì‰½ê²Œ ë°°ìš°ëŠ” ì•Œê³ ë¦¬ì¦˜. í•œë¹›ì•„ì¹´ë°ë¯¸]
> - [[HashTable] JAVAë¡œ ê°„ë‹¨íˆ êµ¬í˜„í•´ë³´ë©° HashTableì„ ì•Œì•„ë³´ì!](https://gracelove91.tistory.com/99)
> - [í•´ì‹œí…Œì´ë¸”ì´ë€? Hash Table êµ¬í˜„ Java](https://beccacatcheserrors.tistory.com/37)
> - [Implementing own Hash Table with Open Addressing Linear Probing](https://www.geeksforgeeks.org/implementing-hash-table-open-addressing-linear-probing-cpp/)
