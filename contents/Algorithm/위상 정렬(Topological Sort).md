# 위상 정렬(Topological Sort)
## 개념
- 순서가 정해져 있는 작업들을 차례로 수행해야 할 때, 순서를 결정하는 알고리즘
  - 모든 정점을 일렬로 나열하되 정점 A에서 정점 B로 가는 간선이 있으면 A를 B보다 앞에 놓이도록 한다.
  - in-degree: 정점 A가 수행되기 전에 수행되어야할 정점 개수, out-degree: 정점 A가 먼저 수행되어야 할 수 있는 정점 개수
  - 즉, 진입 차수가 0인 정점부터 수행한다.
- 하나의 DAG에 하나 이상의 위상 순서가 존재한다.
  - 위상 정렬의 결과는 여러 가지일 수 있다.
- 구현 방법으로는 BFS(진입 차수), DFS(진출 차수)를 이용하는 2가지 방법이 존재한다.

## 조건
- Cycle이 없는 유향 그래프(DAG: Directed Acyclic Graph)에만 적용이 가능하다.
  - 사이클이 있을 경우 시작 정점을 정할 수 없기 때문에 적용이 불가

## BFS를 이용한 위상 정렬
### 개념
- 진입 차수가 0인 정점을 큐에 차례로 삽입하여 FIFO 구조를 이용하여 위상 정렬을 진행한다.
- 최종 결과에서 사이클의 유무를 판단
  - 큐가 비어있는 상황에서 결과의 길이가 정점 수보다 적은 경우 사이클이 존재한다.

### 수행 과정
1. 진입 차수가 0인 시작 정점 한 개를 큐에 삽입한다.
2. 큐가 비어있지 않다면 정점 한 개를 꺼내 결과 리스트에 삽입한다. 만약 큐가 비어있다면 종료한다.
3. 꺼낸 정점에 인접한 모든 정점의 진입 차수를 -1만큼 감소시킨다.

   3-1. 감소한 진입 차수가 0이라면 이 정점은 새로운 시작 정점이 될 수 있기에 큐에 삽입한다.

### 예시

### 시간 복잡도 
- 모든 노드를 확인하면서 $O(V)$, 해당 노드에서 출발하는 간선을 제거한다. $O(E)$
- 모든 노드와 간선을 확인하기에 $O(V + E)$

### 구현


## DFS를 이용한 위상 정렬
### 개념
- DFS를 이용하여 말단 노드까지 내려가 진출 차수가 0인 정점을 스택에 삽입하여 LIFO 구조를 이용하여 위상 정렬을 진행한다.
  - 진출 차수가 0인 정점은 가장 마지막에 수행되는 정점
- DFS의 수행으로 인해 가장 더 늦게 수행되어야 하는 정점이 스택에 먼저 삽입되기 때문에 방문하지 않은 정점 중 랜덤하게 선택해도 문제가 발생하지 않는다.
- DAG 확인을 위해 사이클의 유무를 판단할 수 있어야 한다.
  - 이를 위해 DFS 수행 중 방문 정점에 방문 처리를 진행한다.
  - DFS 수행 중 방문 처리가 된 노드가 있다면 사이클이 존재하는 것을 의미한다.
  - 이를 위해 별도의 배열을 생성하여 DFS가 완전히 끝날 때를 표시하고 사이클의 유무를 판단한다.

### 수행 과정
1. 임의의 방문하지 않은 정점을 선택하여 DFS를 수행하면서 방문하는 정점들을 스택에 삽입하고 방문처리를 해준다.
   - 스택에 삽입하는 정점은 더이상 DFS를 수행할 수 없는 정점을 삽입
2. 모든 정점의 방문을 완료할 때까지 1번을 반복한다.
3. 모든 정점을 방문한 했다면 스택에 삽입한 정점들을 출력하고 위상 정렬을 종료한다.

### 예시

### 구현 

> ⬆️:[Top](#위상-정렬Topological-Sort)
> ⬅️:[Back](https://github.com/Minho979/CS_Study/blob/main/README.md#%EF%B8%8F-Algorithm)
> 💁:[Home](https://github.com/Minho979/CS_Study/blob/main/README.md)
> - Reference
> - [문병로. 쉽게 배우는 알고리즘. 한빛아카데미]
> - [위상 정렬(Topological Sort)](https://sorjfkrh5078.tistory.com/36)
